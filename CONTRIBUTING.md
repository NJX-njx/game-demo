# 贡献指南 | Contributing Guide

欢迎来到 **Purana: Abyss Return** 项目！🎮

我们非常欢迎各类开发者、设计师和AI领域的朋友加入我们的项目团队。无论你擅长编程、美术、策划，还是对AI有独到见解，都欢迎参与讨论和贡献！

---

## 📋 目录

- [项目简介](#项目简介)
- [如何参与](#如何参与)
  - [程序员](#程序员)
  - [美术设计师](#美术设计师)
  - [游戏策划](#游戏策划)
  - [AI研究者](#ai研究者)
- [开发环境搭建](#开发环境搭建)
- [AI智体与游戏融合](#ai智体与游戏融合)
- [贡献流程](#贡献流程)
- [代码规范](#代码规范)
- [社区准则](#社区准则)
- [联系我们](#联系我们)

---

## 🎯 项目简介

**Purana: Abyss Return** 是一个基于 HTML5 + JavaScript 的 2D 动作冒险游戏项目。游戏采用模块化架构，使用 Vite 进行构建管理，具有以下特点：

- **技术栈**: HTML5 Canvas, JavaScript (ES6+), Vite
- **游戏类型**: 2D 横版动作冒险游戏
- **特色系统**: 
  - 战斗系统（近战、远程、闪避反击）
  - 天赋树系统
  - 剧情系统
  - 成就系统
  - 敌人AI系统

---

## 🤝 如何参与

### 👨‍💻 程序员

如果你擅长编程，欢迎在以下方面贡献：

#### 核心系统开发
- **战斗系统**: 改进战斗手感、添加新的攻击方式和连招系统
- **AI系统**: 优化敌人AI行为、增加智能度、实现更复杂的战斗策略
- **物理引擎**: 改进碰撞检测、物理模拟、移动系统
- **UI/UX**: 优化用户界面、提升交互体验

#### 技术优化
- **性能优化**: 提升渲染性能、减少内存占用
- **代码重构**: 改进代码结构、提高可维护性
- **工具开发**: 开发关卡编辑器、调试工具等辅助工具
- **测试**: 编写单元测试、集成测试

#### 需要的技能
- JavaScript (ES6+)
- HTML5 Canvas API
- 游戏开发基础知识
- Git 版本控制

#### 相关文件
- `/src/Entities/` - 实体系统（玩家、敌人等）
- `/src/System/` - 游戏系统（战斗、物品、天赋等）
- `/src/Manager/` - 管理器（地图、音效、数据等）
- `/src/Utils/` - 工具类（向量、碰撞检测等）

---

### 🎨 美术设计师

如果你擅长美术设计，欢迎贡献：

#### 视觉资源
- **角色设计**: 玩家角色、敌人角色、NPC 设计
- **场景美术**: 关卡背景、地图元素、环境装饰
- **UI设计**: 界面元素、图标、按钮、窗口设计
- **特效**: 攻击特效、技能特效、环境特效

#### 动画制作
- **角色动画**: 行走、攻击、受伤等动画帧
- **特效动画**: 技能释放、爆炸、魔法效果等

#### 需要的技能
- 像素艺术 / 2D 美术
- 动画制作
- 色彩搭配
- UI/UX 设计理念

#### 资源规范
- 图片格式: PNG (支持透明通道)
- 存放位置: `/assets/imgs/`
- 命名规范: 使用小写字母和连字符，如 `player-attack-1.png`

---

### 📝 游戏策划

如果你擅长游戏策划，欢迎参与：

#### 内容设计
- **关卡设计**: 设计新的关卡布局、敌人配置、难度曲线
- **剧情编写**: 撰写游戏剧情、角色对话、世界观设定
- **数值平衡**: 调整角色属性、技能数值、敌人强度
- **系统策划**: 设计新的游戏系统和玩法机制

#### 文档维护
- 完善游戏设计文档
- 编写玩家指南和教程
- 整理反馈和建议

#### 需要的技能
- 游戏设计理论
- 文案写作能力
- 数据分析能力
- 创意思维

#### 相关文件
- `/Plot.V3/plot-data.json` - 剧情数据
- `/assets/stages/` - 关卡数据
- `/src/System/Talent/TalentConfigs.js` - 天赋配置

---

### 🤖 AI研究者

**这是我们特别欢迎的领域！** 我们希望探索AI智体与游戏的深度融合。

#### AI智体集成机会

##### 1. 敌人智能优化
当前游戏已经有基础的敌人AI系统，位于 `/src/Entities/Enemys/` 目录。你可以：

- **改进现有AI**: 优化敌人的决策逻辑，使其更智能、更具挑战性
- **行为树**: 实现基于行为树的AI系统
- **状态机**: 设计复杂的敌人状态机
- **机器学习**: 使用强化学习训练敌人AI（实验性）

**当前AI实现示例** (`Enemy_1.js`):
```javascript
updateAI(deltaTime) {
    // 简单的攻击/巡逻逻辑
    if (距离玩家较近) {
        lockOnMode = "attack";
        攻击触发概率 = 15%;
    } else {
        lockOnMode = "patrol";
        随机巡逻移动;
    }
}
```

##### 2. NPC对话系统
- **自然语言处理**: 实现智能NPC对话系统
- **动态剧情**: 根据玩家行为动态生成剧情分支
- **情感系统**: NPC根据玩家行为产生不同反应

##### 3. 程序化内容生成
- **关卡生成**: 使用AI生成随机但合理的关卡布局
- **任务生成**: 动态生成支线任务
- **音乐生成**: 根据游戏情境动态调整背景音乐

##### 4. 玩家辅助系统
- **智能提示**: 根据玩家行为提供个性化提示
- **难度自适应**: 根据玩家水平动态调整游戏难度
- **教学系统**: 智能识别玩家需要帮助的地方

##### 5. 数据分析
- **玩家行为分析**: 分析玩家游戏数据，优化游戏体验
- **平衡性调优**: 使用数据驱动的方法调整游戏平衡

#### AI集成技术选项

1. **规则基础AI** (当前实现)
   - 简单但有效
   - 易于调试和控制
   - 适合简单敌人

2. **行为树 (Behavior Tree)**
   - 结构清晰
   - 易于扩展
   - 适合复杂AI

3. **实用AI (Utility AI)**
   - 基于评分系统
   - 决策更灵活
   - 适合多目标场景

4. **机器学习**
   - TensorFlow.js
   - 神经网络
   - 强化学习 (需要训练环境)

5. **LLM集成** (实验性)
   - 接入GPT等大语言模型
   - 动态对话生成
   - 需要API密钥和网络连接

#### 需要的技能
- AI/ML基础知识
- JavaScript 编程
- 游戏AI理论
- 数据结构与算法

#### 实验性功能
如果你有创新的AI想法，欢迎在 Issue 中提出讨论！我们对以下方向特别感兴趣：
- AI生成的剧情内容
- 玩家陪伴AI助手
- 敌人学习玩家行为模式
- 基于AI的动态难度调整

> 💡 **深入了解**: 查看 [AI集成技术文档](AI_INTEGRATION.md) 获取详细的技术实现方案和代码示例。

---

## 💻 开发环境搭建

### 前置要求
- Node.js (推荐 v14 或更高版本)
- Git
- 代码编辑器 (推荐 VS Code)

### 快速开始

1. **Fork 并克隆仓库**
   ```bash
   git clone https://github.com/YOUR_USERNAME/Purana-Abyss-Return.git
   cd Purana-Abyss-Return
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **启动开发服务器**
   ```bash
   npm run dev
   ```
   
   浏览器将自动打开 `http://localhost:5173`

4. **构建生产版本**
   ```bash
   npm run build
   ```

### 项目结构
```
Purana-Abyss-Return/
├── src/                    # 模块化源代码
│   ├── Entities/          # 游戏实体（玩家、敌人）
│   ├── System/            # 游戏系统（战斗、物品等）
│   ├── Manager/           # 管理器（地图、音效等）
│   └── Utils/             # 工具类
├── assets/                # 资源文件
│   ├── imgs/             # 图片资源
│   ├── audios/           # 音频资源
│   ├── stages/           # 关卡数据
│   └── style/            # CSS样式
├── scripts/              # 独立脚本
├── Plot.V3/              # 剧情数据
├── dist/                 # 构建输出
└── game.html             # 游戏主页面
```

### 调试工具
游戏内置了调试工具，可以在浏览器控制台使用：

```javascript
// 访问调试对象
debug.managers.player       // 玩家对象
debug.managers.mapManager   // 地图管理器
debug.managers.itemManager  // 物品管理器

// 常用调试命令
debug.managers.player.hp = 1000  // 设置生命值
debug.managers.player.position   // 查看玩家位置
```

---

## 🔄 贡献流程

### 1. 选择任务
- 浏览 [Issues](https://github.com/NJX-njx/Purana-Abyss-Return/issues) 找到你感兴趣的任务
- 在 Issue 中留言表示你想要处理
- 等待维护者分配任务

### 2. 创建分支
```bash
git checkout -b feature/your-feature-name
# 或
git checkout -b fix/your-bug-fix
```

### 3. 进行开发
- 遵循[代码规范](#代码规范)
- 频繁提交，保持提交记录清晰
- 提交信息使用中文，简明扼要

### 4. 测试
- 在本地测试你的更改
- 确保没有破坏现有功能
- 如果可能，添加相关测试

### 5. 提交 Pull Request
- 推送你的分支到 GitHub
- 创建 Pull Request
- 详细描述你的更改和原因
- 关联相关的 Issue

### 6. 代码审查
- 维护者会审查你的代码
- 根据反馈进行修改
- 合并后你的贡献将被记录

---

## 📏 代码规范

### JavaScript 规范
- 使用 ES6+ 语法
- 使用 2 空格缩进
- 变量命名使用 camelCase
- 类名使用 PascalCase
- 常量使用 UPPER_SNAKE_CASE
- 添加必要的注释，特别是复杂逻辑

```javascript
// 好的示例
class EnemyAI {
    constructor(enemy) {
        this.enemy = enemy;
        this.state = "idle";
        this.ATTACK_RANGE = 100;
    }

    /**
     * 更新AI逻辑
     * @param {number} deltaTime - 时间增量
     */
    update(deltaTime) {
        // AI更新逻辑
    }
}
```

### 文件命名
- JavaScript: PascalCase.js (类文件) 或 camelCase.js (工具文件)
- 资源文件: 小写字母和连字符，如 `player-attack.png`

### 提交信息规范
使用中文，格式如下：
```
<类型>: <简短描述>

<详细描述（可选）>

关联 Issue #123
```

类型：
- `新增`: 新功能
- `修复`: Bug修复
- `优化`: 性能优化
- `重构`: 代码重构
- `文档`: 文档更新
- `样式`: 代码格式调整

---

## 🤝 社区准则

我们致力于营造一个开放、友好、包容的社区环境。

**请阅读我们的 [行为准则](CODE_OF_CONDUCT.md)** 了解详细的社区规范。

### 核心原则
- **尊重他人**: 尊重所有贡献者，保持友好和专业
- **建设性反馈**: 提供有益的、具体的反馈
- **开放心态**: 接受不同的观点和建议
- **协作精神**: 乐于帮助他人，分享知识

### 讨论方式
- 使用 GitHub Issues 讨论功能和改进建议
- 使用 Pull Request 讨论具体的代码实现
- 保持讨论聚焦于主题
- 避免重复已有的讨论

### 提问建议
提问时请包含：
- 清晰的问题描述
- 相关的代码片段或截图
- 你已经尝试过的解决方法
- 运行环境信息（浏览器、操作系统等）

---

## 📞 联系我们

### 项目维护者

查看 [制作人员信息](scripts/menu.js#L27-L70) 了解核心团队成员。

### 反馈渠道
- **Issues**: 报告 Bug、提出功能建议
- **Pull Requests**: 提交代码贡献
- **Discussions**: 一般性讨论和问答

---

## 🌟 特别感谢

感谢所有为本项目做出贡献的开发者、设计师和社区成员！

### 如何出现在贡献者名单
当你的 Pull Request 被合并后，你将自动成为项目的贡献者。我们会在后续版本中添加贡献者墙来展示所有贡献者。

---

## 📚 延伸阅读

- [游戏设计文档](README.md)
- [剧情数据说明](README.md#📖-剧情数据加载说明)
- [通关功能实现](CHANGELOG_ENDING.md)

---

## 💡 FAQ

### Q: 我是初学者，可以参与吗？
A: 当然可以！我们欢迎所有水平的贡献者。你可以从简单的任务开始，比如修复文档错误、添加注释、测试功能等。

### Q: 我不会编程，可以参与吗？
A: 绝对可以！游戏开发不只是编程，我们需要美术、音乐、策划、测试等各方面的人才。

### Q: AI集成需要什么基础？
A: 基础的JavaScript知识和对AI概念的了解即可开始。我们鼓励实验和学习。

### Q: 如何测试我的更改？
A: 使用 `npm run dev` 启动开发服务器，在浏览器中测试。使用浏览器的开发者工具进行调试。

### Q: 我的PR多久会被审查？
A: 我们会尽快审查，通常在1-3天内。如果超过一周没有回应，请在PR中评论提醒我们。

---

**让我们一起创造一个融合了先进AI技术的精彩游戏！期待你的加入！** 🚀🎮✨
